{% schema %}
{
  "name": "Bulk Order CTA",
  "settings": [
    {
      "type": "image_picker",
      "id": "cta_image",
      "label": "CTA Image"
    },
    {
      "type": "text",
      "id": "cta_text",
      "label": "Button Text",
      "default": "Bulk Order"
    },
    {
      "type": "url",
      "id": "cta_link",
      "label": "CTA Link (Optional)",
      "info": "Leave empty to trigger Shopify Chat."
    }
  ],
  "presets": [
    {
      "name": "Bulk Order CTA",
      "category": "Custom"
    }
  ]
}
{% endschema %}

<div id="bulk-order-cta" class="cta-button">
  <a
    id="cta-link"
    href="{{ section.settings.cta_link | default: '#' }}"
    {% if section.settings.cta_link == blank %}
      role="button"
    {% endif %}
  >
    {% if section.settings.cta_image %}
      <img src="{{ section.settings.cta_image | img_url: 'medium' }}" alt="Bulk Order">
    {% endif %}
    <span>{{ section.settings.cta_text }}</span>
  </a>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    var ctaButton = document.getElementById("cta-link");
    if (ctaButton.getAttribute("href") === "#") {
      ctaButton.addEventListener("click", function (event) {
        event.preventDefault();
        var chatElement = document.querySelector("inbox-online-store-chat");
        if (chatElement) {
          chatElement.setAttribute("is-open", "true"); // Open Shopify Inbox
        }
      });
    }
  });
</script>

<style>
  .cta-button {
    text-align: center;
    margin: 20px 0;
  }

  .cta-button a {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    background: #0073e6;
    color: #fff;
    font-size: 16px;
    font-weight: bold;
    text-decoration: none;
    padding: 12px 20px;
    border-radius: 8px;
    transition: background 0.3s ease-in-out;
  }

  .cta-button a:hover {
    background: #005bb5;
  }

  .cta-button img {
    width: 30px;
    height: 30px;
  }
</style>
